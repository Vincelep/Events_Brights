<!-- Affichage d'un event -->

<div class="card border-warning text-center m-5">

  <div class="card-header">
    <h1><i class="fas fa-sun"></i> <%= @event.title %></h1>
  </div>
  <div class="card-body text-warning">
      <p class="m-2"><%= @event.description %></p>
      <div class="card-body text-warning">
        <ul class="card-text list-group">
          <li class="list-group-item">Nombre de participants : <%= @event.attendees.count %></li>
          <li class="list-group-item">Organisateur : <%= @event.administrator.email %></li>
          <li class="list-group-item">Date de début : <%= @event.start_date.strftime("%m/%d/%y") %></li>
          <li class="list-group-item">Date de fin : <%= @event.end_date %> (durée : <%= @event.duration %>)</li>
          <li class="list-group-item">Lieu : <%= @event.location %></li></br>
          <li class="list-group-item">Le prix : <%= @event.price %> €</li>
        </ul>
      </div>
  </div>

</div>

<div class="text-center">
    <%= form_tag charges_path do %>
    <article>
      <% if flash[:error].present? %>
        <div id="error_explanation">
          <p><%= flash[:error] %></p>
        </div>
      <% end %>
      <label class="amount">
        <span>Pour rejoindre l'event, sois gentil et paye <%= @event.price.to_f / 100 %>€.</span>
      </label>
    </article>

    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
            data-description="Paiement Event"
            data-amount="<%= @event.price %>"
            data-currency="eur"
            data-locale="auto"></script>
  <% end %>
</div>

<!-- à utiliser pour faire en sorte qu'on puisse participer ssi on est ni admin ni attendee
  def is_user_new_for_event?
    if current_user != @event.admin && current_user != @event.attendees.find(current_user)
    end
  end